<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Profile</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    
    {{!-- <script src="script.js"></script> --}}
   
</head>
<body>
    <nav class="navbar navbar-expand-md navbar-light bg-light sticky-top">
                            <h3 class="navbar-brand" style="font-size:22px">Shopping app</h3>
                            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                              <span class="navbar-toggler-icon"></span>
                            </button>
                          
                            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                              <ul class="navbar-nav mr-auto">
                                <li class="nav-item active">
                                  <a class="nav-link"><span class="sr-only">(current)</span></a>
                                </li>
                                <li class="nav-item">
                                  <a class="nav-link"></a>
                                </li>
                                <li class="nav-item dropdown">
                                  {{!-- <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> --}}
                                    
                                  {{!-- </a> --}}
                                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <a class="dropdown-item"></a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item"></a>
                                  </div>
                                </li>
                                <li class="nav-item">
                                  <a class="nav-link disabled"></a>
                                </li>
                              </ul>
                              <form class="form-inline my-2 my-lg-0">
                                <h3>Profile</h3>
                                
                              </form>
                            </div>
                    </nav>
    
    <br/>
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-5 col-xl-5">
                <br/><br/>
                <div class="card p-2" style="width: 20rem;"><br/>
                    <div class="row">
                        <div class="col-3"></div>
                        <div class="col">
                            <img class="rounded-circle" src={{user.image}} alt="Generic placeholder image" width="150" height="150">
                            
                        </div>
                        <div class="col-3"></div>
                    </div><br/>
                    <div class="row text-center">
                        <div class="col-1"></div>
                        <div class="col">
                            <form id="formph" action='/up' enctype="multipart/form-data" method="POST">
                            <input type="file" class="btn btn-secondary p-0 m-0" name="photo" id="ph"><br/><br/>
                            <input type="submit" class="btn btn-warning" value="Submit Photo">
                            </form>
                        </div>
                        <div class="col-1"></div>
                    </div>
                    
                            
                    <br/><br/>
                    <div class="row">
                        <div class="col-2"></div>
                        <div class="col">
                             <h5>Username: {{user.username}}</h5><br/>
                             <h5>Password: <span id="pass" style="visibility:hidden">{{user.password}}</span></h5>
                             <a href="" style="text-decoration:none" id="forpass">Forgot Password?</a>
                        </div>
                        <div class="col-2"></div>
                    </div><br/>
           
                </div>
                
          </div>
            
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-7 col-xl-7">
                <br/><br/><br/><br/>
                <span style="font-size:20px">Address: <b id="addr">{{user.address}}</b></span><br/><br/>
                <p>
                <a class="btn btn-primary" data-toggle="collapse" href="#adr" role="button" aria-expanded="false" aria-controls="collapseExample">
                    Change Address
                </a>
                
                </p>
                <div class="collapse" id="adr">
                <div class="card card-body">
                     <div class="form-group">
                        <label for="ad">Enter New Address</label>
                        <input type="text" class="form-control" id="ad" placeholder="New Address"><br/>
                        <button class="btn btn-success" id="changeadr">CHANGE</button>
                    </div>
                </div>
                </div>
                <br/><br/><br/>
                <span style="font-size:20px">Mobile Number: <b id="mobno">{{user.mobno}}</b></span><br/><br/>
                <p>
                <a class="btn btn-primary" data-toggle="collapse" href="#mob" role="button" aria-expanded="false" aria-controls="collapseExample">
                    Change Mobile Number
                </a>
                
                </p>
                <div class="collapse" id="mob">
                <div class="card card-body">
                     <div class="form-group">
                        <label for="mo">Enter New Mobile No.</label>
                        <input type="number" class="form-control" id="mo" placeholder="New Mobile No."><br/>
                        <button class="btn btn-success" id="changemob">CHANGE</button>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>


<br/><br/><br/><br/><br/>
    <script>
        
                $(function(){
                    (function(){
                        p=$('#pass').text()
                        
                        let str=$('#pass').text().split('')
                        let k=''
                        for(let i=0;i<str.length;i++){
                        k+='*'
                        
                        }
                        $('#pass').css('visibility','visible')
                        $('#pass').text(k)
                    })()
                    
                    $('#changeadr').click(function(){
                        let u={{user.id}}
                        $.get(`/changeadr?uid=${u}&newadr=${$('#ad').val()}`,(u)=>{})
                        $('#addr').text($('#ad').val())
                    })
                    $('#changemob').click(function(){
                        let u={{user.id}}
                        $.get(`/changemob?uid=${u}&newmob=${$('#mo').val()}`,(u)=>{})
                        $('#mobno').text($('#mo').val())
                    })
                    $('#forpass').click(function(){
                        window.alert('Mail to someemail@gmail.com for getting message on given mobile number.')
                    })
                    $("#formph").submit(function(e){
                        if($('#ph').val()){

                        }
                        else{
                            e.preventDefault();
                        }
                        
                    });
                })
    </script>
</body>
</html>